<?xml version='1.0'?>
<sdf version='1.4'>
    <model name="atom">
        <static>false</static>

        <!-- Make Chassis of Bot -->
        <link name="chassis">
            <pose>0 0 0.2 0 0 0</pose>
            <inertial>
                <mass>15.0</mass>
                <inertia> <!-- inertias are tricky to compute -->
                    <!-- http://gazebosim.org/tutorials?tut=inertia&cat=build_robot -->
                    <ixx>1.535</ixx>       <!-- for a box: ixx = 0.083 * mass * (y*y + z*z) -->
                    <ixy>0.0</ixy>         <!-- for a box: ixy = 0 -->
                    <ixz>0.0</ixz>         <!-- for a box: ixz = 0 -->
                    <iyy>1.535</iyy>       <!-- for a box: iyy = 0.083 * mass * (x*x + z*z) -->
                    <iyz>0.0</iyz>         <!-- for a box: iyz = 0 -->
                    <izz>1.745</izz>       <!-- for a box: izz = 0.083 * mass * (x*x + y*y) -->
                </inertia>
            </inertial>
            <collision name="collision">
                <geometry>
                    <box>
                        <size> 0.5 0.5 0.2 </size>
                    </box>
                </geometry>
            </collision>

            <visual name="visual">
                <geometry>
                    <box>
                        <size> 0.5 0.5 0.2 </size>
                    </box>
                </geometry>

            </visual>
            
        </link>

        <!-- Right Wheel Back -->
        <link name="right_wheel_back">
            <pose> -0.2 0.3 0.1 0 1.5707 1.5707</pose>
            <inertial>
                <mass>5.0</mass>
                <inertia> <!-- inertias are tricky to compute -->
                    <!-- http://gazebosim.org/tutorials?tut=inertia&cat=build_robot -->
                    <ixx>0.1</ixx>
                    <ixy>0.0</ixy>
                    <ixz>0.0</ixz>
                    <iyy>0.1</iyy>
                    <iyz>0.0</iyz>
                    <izz>0.1</izz>
                </inertia>
            </inertial>
            <visual name="visual">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </visual>
            <collision name="collision">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </collision>
        </link>

        <!-- Right Wheel Front -->
        <link name="right_wheel_front">
            <pose> 0.2 0.3 0.1 0 1.5707 1.5707</pose>
            <inertial>
                <mass>5.0</mass>
                <inertia> <!-- inertias are tricky to compute -->
                    <!-- http://gazebosim.org/tutorials?tut=inertia&cat=build_robot -->
                    <ixx>0.1</ixx>
                    <ixy>0.0</ixy>
                    <ixz>0.0</ixz>
                    <iyy>0.1</iyy>
                    <iyz>0.0</iyz>
                    <izz>0.1</izz>
                </inertia>
            </inertial>
            <visual name="visual">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </visual>
            <collision name="collision">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </collision>
        </link>

        <!-- Left Wheel Back -->
        <link name="left_wheel_back">
            <pose> -0.2 -0.3 0.1 0 1.5707 1.5707</pose>
            <inertial>
                <mass>5.0</mass>
                <inertia> <!-- inertias are tricky to compute -->
                    <!-- http://gazebosim.org/tutorials?tut=inertia&cat=build_robot -->
                    <ixx>0.1</ixx>
                    <ixy>0.0</ixy>
                    <ixz>0.0</ixz>
                    <iyy>0.1</iyy>
                    <iyz>0.0</iyz>
                    <izz>0.1</izz>
                </inertia>
            </inertial>
            <visual name="visual">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </visual>
            <collision name="collision">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </collision>
        </link>

        <!-- Left Wheel Front -->
        <link name="left_wheel_front">
            <pose> 0.2 -0.3 0.1 0 1.5707 1.5707</pose>
            <inertial>
                <mass>5.0</mass>
                <inertia> <!-- inertias are tricky to compute -->
                    <!-- http://gazebosim.org/tutorials?tut=inertia&cat=build_robot -->
                    <ixx>0.1</ixx>
                    <ixy>0.0</ixy>
                    <ixz>0.0</ixz>
                    <iyy>0.1</iyy>
                    <iyz>0.0</iyz>
                    <izz>0.1</izz>
                </inertia>
            </inertial>
            <visual name="visual">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </visual>
            <collision name="collision">
                <geometry>
                    <cylinder>
                        <radius> 0.1 </radius>
                        <length>0.05</length>
                    </cylinder>
                </geometry>
            </collision>
        </link>

        <!-- Define Joints -->
        <!-- Right Wheel Joint Back-->
        <joint type="revolute" name="right_wheel_hinge_back">
            <pose>0 0 0.03 0 0 0</pose>
            <child>right_wheel_back</child>
            <parent>chassis</parent>
            <axis>
                <xyz>0 1 0</xyz>
            </axis>
        </joint>

        <!-- Right Wheel Joint Front-->
        <joint type="revolute" name="right_wheel_hinge_front">
            <pose>0 0 0.03 0 0 0</pose>
            <child>right_wheel_front</child>
            <parent>chassis</parent>
            <axis>
                <xyz>0 1 0</xyz>
            </axis>
        </joint>

        <!-- Left Wheel Joint Back-->
        <joint type="revolute" name="left_wheel_hinge_back">
            <pose>0 0 -0.03 0 0 0</pose>
            <child>left_wheel_back</child>
            <parent>chassis</parent>
            <axis>
                <xyz>0 1 0</xyz>
            </axis>
        </joint>

        <!-- Left Wheel Joint front-->
        <joint type="revolute" name="left_wheel_hinge_front">
            <pose>0 0 -0.03 0 0 0</pose>
            <child>left_wheel_front</child>
            <parent>chassis</parent>
            <axis>
                <xyz>0 1 0</xyz>
            </axis>
        </joint>

        <!-- Camera -->
        <link name="camera">
            <pose>0.26 0 0.15 0 0 0</pose>

            <visual name="visual">
                <geometry>
                    <box>
                        <size>0.05 0.05 0.05</size>
                    </box>
                </geometry>
            </visual>

            <collision name="collision">
                <geometry>
                    <box>
                        <size>0.05 0.05 0.05</size>
                    </box>
                </geometry>
            </collision>
        </link>

        <!-- Camera Joint -->
        <joint type="fixed" name="camera_joint" >
            <!--<pose>0.26 0 0.15 0 0 0</pose> -->
            <parent>chassis</parent>
            <child>camera</child>
            <axis>
                <xyz>0 1 0</xyz>
            </axis>
        </joint>

        <!-- Project center to the ground -->
        <link name="robot_footprint"></link>

        <!-- Plugin -->
        <plugin name="skid_steer_drive_controller" filename="libgazebo_ros_skid_steer_drive.so">
            <updateRate>100.0</updateRate>
            <robotNamespace>/</robotNamespace>
            <leftFrontJoint>left_wheel_hinge_front</leftFrontJoint>
            <rightFrontJoint>right_wheel_hinge_front</rightFrontJoint>
            <leftRearJoint>left_wheel_hinge_back</leftRearJoint>
            <rightRearJoint>right_wheel_hinge_back</rightRearJoint>
            <wheelSeparation>0.4</wheelSeparation>
            <wheelDiameter>0.2</wheelDiameter>
            <robotBaseFrame>robot_footprint</robotBaseFrame>
            <torque>10</torque>
            <topicName>cmd_vel</topicName>
            <odometryTopic>odom</odometryTopic>
            <odometryFrame>odom</odometryFrame>
            <commandTopic>cmd_vel</commandTopic>
            <topic_name_twist>cmd_vel</topic_name_twist>
            <topic_name_odometry>odom</topic_name_odometry>
            <topic_name_joint>joint</topic_name_joint>
            <broadcastTF>true</broadcastTF>
            <covariance_x>0.0001</covariance_x>
            <covariance_y>0.0001</covariance_y>
            <covariance_yaw>0.01</covariance_yaw>

        </plugin>

    </model>
</sdf>